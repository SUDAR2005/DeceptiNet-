FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

# Check if the files are present before running the script
CMD ["sh", "-c", "if [ -f data.csv ] && [ -f node.csv ]; then python optimal_honeypot.py data.csv node.csv; else echo 'Error: data.csv and node.csv not found in the mounted volume.'; fi"]